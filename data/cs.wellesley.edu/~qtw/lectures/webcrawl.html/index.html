b'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">\n<!--Tyler Moore\nCreated 10/25/2011\nCS 349B Web page\n-->\n<html lang="en">\n<head>\n<title>Web Crawling to Collect Data</title>\n<meta http-equiv="Content-Type" content="text/html; charset=utf-8">\n<meta name="keywords" content="Wellesley College, Computer Science, CS349B, Quantifying the World, Visualization, Data Analysis">\n<meta name="description" content="Course webpage for CS349 Quantifying the World, Wellesley College, Spring 2012.">\n<!--insert Javascript from Scott Anderson to calculate table of contents --> \n<script type="text/JavaScript" src="../addOnLoad.js"></script>\n<script type="text/JavaScript" src="../TOC.js"></script>\n<link href="../qtwstyle.css" rel="stylesheet" type="text/css" media="screen">\n<link href="../pygments.css" rel="stylesheet" type="text/css" media="screen">\n<link href="../qtwprint.css" rel="stylesheet" type="text/css" media="print">\n</head>\n<body>\n\n<div id="main">\n<div id="header">\n<table border="0" width="800px" cellspacing="0">\n<tr>\n  <td rowspan="4"><a href="../index.html"><img src="../clusters3.gif" width="200px" alt="Pretty network"></a></td>\n  <td colspan="6"><p style="font-size: 20pt; text-align: center; color: #000066; margin: 0;"><a href="../index.html">CS349B: Quantifying the World</a></td>\n</tr>\n<tr>\n  <td colspan="6"><p style="font-size: 14pt; text-align: center; color: #505050; margin: 0; padding: 0;">Wellesley College, Spring 2012</td>\n</tr>\n<tr>\n  <td colspan="6"><p style="font-size: 12pt; text-align: center; color: #505050; margin: 0; padding: 0;">Instructor: <a href="http://cs.wellesley.edu/~tmoore/">Tyler Moore</a></td>\n</tr>\n<tr>\n  <td><a class="menu" href="../index.html">Home</a></td>\n  <td><a class="menu" href="../admin/syllabus.html">Course Info</a></td>\n  <td><a class="menu" href="../admin/schedule.html">Schedule</a></td>\n  <td><a class="menu" href="../project/project.html">Project</a></td>\n  <td><a class="menu" href="../admin/resources.html">Resources</a></td>\n</tr>\n</table>\n</div> \n\n<div id="content">\n<h1>Web Crawling to Collect Data</h1>\n<div id="insert_TOC_here"></div>\n<h2>Reading</h2>\n<p>In order to scrape web pages, it is necessary for you to know a bit about HTML. Fortunately, you\'ve got quite a leg up on others because you already have experience programming. Nonetheless, here are some references from CS110 that will help guide you:</p>\n<ul>\n<li><a href="http://cs.wellesley.edu/~cs110/lectures/L03-html/HTML.html">HTML (up to and including the Tag and Attribute Syntax Section)</a></li>\n<li><a href="http://cs.wellesley.edu/~cs110/lectures/Tables/index.html">Tables (ignore discussion involving CSS)</a></li>\n<li><a href="http://cs.wellesley.edu/~cs110/lectures/Forms/">Forms (up to and including SUBMIT, RESET and BUTTON elements section, ignore anything about fieldsets)</a></li>\n</ul>\n<p>Additional reading includes:</p>\n<ul>\n<li>These lecture notes (currently incomplete, so don\'t read until Friday afternoon)</li>\n<li><a href="http://www.crummy.com/software/BeautifulSoup/documentation.html">Beautiful Soup Documentation</a> - Please read the following sections:<ul>\n<li>Quick Start</li>\n<li>Parsing HTML</li>\n<li>The Parse Tree</li>\n<li>Navigating the Parse Tree</li>\n<li>Searching the Parse Tree</li>\n</ul>\n</li>\n</ul>\n<h2>Fetching and storing a web page</h2>\n<p>Python has a built-in library for opening URLs called <a href="http://docs.python.org/library/urllib2.html">urllib2</a>.  Suppose we want to download <a href="../code/htmldemo.html">this file</a> in Python.  Here\'s what we\'d do:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="kn">import</span> <span class="nn">urllib2</span>\n<span class="n">urlf</span><span class="o">=</span><span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="s">&quot;http://cs.wellesley.edu/~qtw/data/htmldemo.html&quot;</span><span class="p">)</span>\n</pre></div>\n</td></tr></table>\n\n<p>So what\'s <code>urlf</code>? According to <a href="http://docs.python.org/library/urllib2.html">the documentation</a>, <code>urlopen</code> "returns a file-like object with two additional methods:</p>\n<ul>\n<li><code>geturl()</code>: return the URL of the resource retrieved, commonly used to determine if a redirect was followed</li>\n<li><code>info()</code>: return the meta-information of the page, such as headers, in the form of an mimetools.Message instance (see Quick Reference to HTTP Headers)"</li>\n</ul>\n<p>OK so let\'s explore <code>urlf</code>:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">page</span><span class="o">=</span><span class="n">urlf</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">page</span>\n<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Example</span> <span class="n">HTML</span> <span class="nb">file</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Important</span> <span class="n">things</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="n">Summary</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Here</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">example</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.w3schools.com/html/&quot;</span><span class="o">&gt;</span><span class="n">HTML</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span> <span class="nb">file</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Motivation</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;motives&quot;</span><span class="o">&gt;</span>\n        <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">I</span><span class="s">&#39;m not sure why you&#39;</span><span class="n">d</span> <span class="n">want</span> <span class="n">to</span> <span class="n">download</span> <span class="n">it</span><span class="o">.</span> <span class="n">Here</span> <span class="n">are</span> <span class="n">some</span> <span class="n">possible</span> <span class="n">reasons</span><span class="p">:</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n        <span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span> <span class="n">contains</span> <span class="n">very</span> <span class="n">important</span> <span class="n">information</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">You</span> <span class="n">are</span> <span class="n">the</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.google.com/&quot;</span><span class="o">&gt;</span><span class="n">Google</span> <span class="n">bot</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="p">,</span> <span class="ow">and</span> <span class="n">you</span><span class="s">&#39;ll visit &lt;em&gt;anything&lt;/em&gt;.&lt;/li&gt;</span>\n            <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span><span class="s">&#39;s the example we are using in class.&lt;/li&gt;</span>\n        <span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span>\n    <span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Results</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span> <span class="ow">is</span> <span class="n">important</span> <span class="n">to</span> <span class="n">have</span> <span class="n">lists</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n        <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">That</span> <span class="n">much</span> <span class="n">should</span> <span class="n">be</span> <span class="n">clear</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n    <span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Everything</span> <span class="n">we</span> <span class="n">say</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">page</span> <span class="ow">is</span> <span class="n">true</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Conclusion</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n    <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">This</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">interesting</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">urlf</span><span class="o">.</span><span class="n">geturl</span><span class="p">()</span>\n<span class="s">&#39;http://cs.wellesley.edu/~qtw/data/htmldemo.html&#39;</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">urlf</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>\n<span class="n">Date</span><span class="p">:</span> <span class="n">Tue</span><span class="p">,</span> <span class="mo">07</span> <span class="n">Feb</span> <span class="mi">2012</span> <span class="mi">22</span><span class="p">:</span><span class="mi">51</span><span class="p">:</span><span class="mo">05</span> <span class="n">GMT</span>\n<span class="n">Server</span><span class="p">:</span> <span class="n">Apache</span><span class="o">/</span><span class="mf">2.2</span><span class="o">.</span><span class="mi">3</span> <span class="p">(</span><span class="n">Red</span> <span class="n">Hat</span><span class="p">)</span>\n<span class="n">Last</span><span class="o">-</span><span class="n">Modified</span><span class="p">:</span> <span class="n">Tue</span><span class="p">,</span> <span class="mo">07</span> <span class="n">Feb</span> <span class="mi">2012</span> <span class="mi">22</span><span class="p">:</span><span class="mi">17</span><span class="p">:</span><span class="mi">21</span> <span class="n">GMT</span>\n<span class="n">ETag</span><span class="p">:</span> <span class="s">&quot;18006df-39e-4b8672489de40&quot;</span>\n<span class="n">Accept</span><span class="o">-</span><span class="n">Ranges</span><span class="p">:</span> <span class="nb">bytes</span>\n<span class="n">Content</span><span class="o">-</span><span class="n">Length</span><span class="p">:</span> <span class="mi">926</span>\n<span class="n">Connection</span><span class="p">:</span> <span class="n">close</span>\n<span class="n">Content</span><span class="o">-</span><span class="n">Type</span><span class="p">:</span> <span class="n">text</span><span class="o">/</span><span class="n">html</span>\n</pre></div>\n</td></tr></table>\n\n<p>Well what if we want to store a copy of the HTML file for future use?  What if, for instance, this HTML file is taken down by its owner? Or what if the file is modified by its owner?  In these cases, you would be better off storing a local copy of the file.  To do that just write the stored string to a file:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2\n3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">&quot;/home/tmoore/cs349b/data/inclass/htmldemo.html&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">)</span>\n<span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">page</span><span class="p">)</span>\n<span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>\n</pre></div>\n</td></tr></table>\n\n<p>Before we do that though, we need to make sure that the directory structure actually exists.  Now is a good time to talk about the recommended strategy for storing code and data in your home directory.  What I recommend is that you create a directory <code>cs349b</code> in your home directory, and then inside that create two more subdirectories <code>data</code> and <code>code</code>.  You can store the code you write in the <code>code</code> directory and the data you download in the <code>data</code> directory.<br />\n</p>\n<p>But how do you create those directories in Linux?  Here\'s what I did:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">[</span>tmoore@trout ~<span class="o">]</span> <span class="nb">pwd</span>\n/home/tmoore\n<span class="o">[</span>tmoore@trout ~<span class="o">]</span> mkdir cs349b\n<span class="o">[</span>tmoore@trout ~<span class="o">]</span> <span class="nb">cd </span>cs349b\n<span class="o">[</span>tmoore@trout cs349b<span class="o">]</span> mkdir code\n<span class="o">[</span>tmoore@trout cs349b<span class="o">]</span> mkdir data\n<span class="o">[</span>tmoore@trout cs349b<span class="o">]</span> <span class="nb">pwd</span>\n/home/tmoore/cs349b\n<span class="o">[</span>tmoore@trout cs349b<span class="o">]</span> ls\ncode  data\n</pre></div>\n</td></tr></table>\n\n<p>If you are unsure about the Linux commands <code>pwd</code>, <code>mkdir</code>, <code>cd</code>, or <code>ls</code>, please refer back to <a href="http://cs.wellesley.edu/~anderson/writing/unix/unix-intro.pdf">Scott Anderson\'s Introduction to Unix</a>, particularly Section 4.</p>\n<p>When you are fetching lots of pages, you will need to think more carefully about file and directory naming conventions. </p>\n<h3>Aside: alternative way to scrape pages</h3>\n<p>There are other ways to programmatically store URLs. Most Linux distributions include a command called <code>wget</code>, which can fetch URLs.  Because <code>wget</code> has been around for a very long time, it offers very extensive customization and powerful features, such as the ability to recursively fetch pages linked to from the original URL.  To run <code>wget</code> from a python program, you need to use the <code>os.system()</code> method, which takes an arbitrary system command as a parameter and executes the statement.  The following statement fetches the URL, then uses the <code>-O</code> parameter built-in to <code>wget</code> to store the file in the desired location.</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&quot;wget http://cs.wellesley.edu/~qtw/data/htmldemo.html -O /home/tmoore/cs349b/data/inclass/htmldemo.html&quot;</span><span class="p">)</span>\n</pre></div>\n</td></tr></table>\n\n<h2>Parsing HTML using BeautifulSoup</h2>\n<p>The reason to write a web crawler is to gather web pages that include content of interest. Fetching and storing the page is only the first step. Next you must <em>parse</em> the HTML to extract just the content you are interested in. </p>\n<p>The best way to parse HTML in Python is to use the add-on library Beautiful Soup (the name comes from a <a href="http://www.durrant.co.uk/alice/">Lewis Carroll poem</a> in Alice and Wonderland). </p>\n<p>Recall from today\'s reading that HTML pages are composed of elements that begin and end with tags, e.g., <code>&lt;p&gt;This is a paragraph&lt;/p&gt;</code>. Furthermore, these tags are automatically arranged in a nested tree structure.</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16</pre></div></td><td class="code"><div class="codehilite"><pre><span class="nt">&lt;html&gt;</span>\n    <span class="nt">&lt;head&gt;</span>\n        <span class="nt">&lt;title&gt;</span>\n        Example <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;http://www.w3schools.com/html/&quot;</span><span class="nt">&gt;</span>HTML<span class="nt">&lt;/a&gt;</span> file\n        <span class="nt">&lt;/title&gt;</span>\n    <span class="nt">&lt;/head&gt;</span>\n    <span class="nt">&lt;body&gt;</span>\n        <span class="nt">&lt;h1&gt;</span>\n        Important things\n        <span class="nt">&lt;/h1&gt;</span>\n        <span class="nt">&lt;h2&gt;</span>\n        Summary\n        <span class="nt">&lt;/h2&gt;</span>\n        ...\n    <span class="nt">&lt;/body&gt;</span>\n<span class="nt">&lt;/html&gt;</span>\n</pre></div>\n</td></tr></table>\n\n<p>For example in the above HTML file, the <code>&lt;head&gt;</code> tag is nested inside the <code>&lt;html&gt;</code> tag, so we say that the <code>&lt;head&gt;</code> tag is a child of the <code>&lt;html&gt;</code> tag. Furthermore, the <code>&lt;title&gt;</code> tag is a child of the <code>&lt;head&gt;</code> tag. The <code>&lt;body&gt;</code> tag, however, is a sibling of the <code>&lt;head&gt;</code> tag.</p>\n<p><a href="http://cs.wellesley.edu/~cs110/documentation/firebug/firebug.html">Firebug</a> is an extremely useful add-on for Firefox that, among other things, lets you see the tree structure of any web page. </p>\n<h3>Beautiful Soup Strategy 1: Navigating the Parse Tree</h3>\n<p>BeautifulSoup constructs a parse tree based on this HTML structure, so you can navigate through the tree easily. It also has a very useful search capability for extracting elements that match a particular criteria, such as a certain tag name.<br />\n</p>\n<p>Let\'s begin by parsing the sample HTML file from above. Recall that we stored a local copy of the HTML file in <code>/home/tmoore/cs349b/data/htmldemo.html</code>.  To open the file in BeautifulSoup we must do the following:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2\n3\n4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">BeautifulSoup</span> <span class="kn">import</span> <span class="n">BeautifulSoup</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">soup</span> <span class="o">=</span> <span class="n">BeautifulSoup</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="s">&quot;/home/tmoore/cs349b/data/inclass/htmldemo.html&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">__class__</span>\n<span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">BeautifulSoup</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="s">&#39;&gt;</span>\n</pre></div>\n</td></tr></table>\n\n<p>So <code>soup</code> is a BeautifulSoup object. The purpose of BeautifulSoup objects is to make it easier to select the HTML tags of interest, along with the tag\'s associated "inner HTML". You can identify tags of interest in two main ways: navigating the parse tree or searching for tags.  You can also combine the approaches, as we will see.</p>\n<p>Let\'s explore the parse tree first.  The first member of interest in a <code>BeautifulSoup</code> object is its <code>contents</code>, which is a list of child elements. At first, there is only one child, the entire HTML contents:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>\n<span class="mi">1</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="k">print</span> <span class="n">soup</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">prettify</span><span class="p">()</span> <span class="c">#since the length of contents is only 1, we just reference the first element</span>\n<span class="o">&lt;</span><span class="n">html</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span>\n  <span class="n">Example</span> <span class="n">HTML</span> <span class="nb">file</span>\n <span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span>\n  <span class="n">Important</span> <span class="n">things</span>\n <span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span>\n  <span class="n">Summary</span>\n <span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>\n  <span class="n">Here</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">example</span>\n  <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.w3schools.com/html/&quot;</span><span class="o">&gt;</span>\n   <span class="n">HTML</span>\n  <span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>\n  <span class="nb">file</span><span class="o">.</span>\n <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span>\n  <span class="n">Motivation</span>\n <span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>\n  <span class="n">I</span><span class="s">&#39;m not sure why you&#39;</span><span class="n">d</span> <span class="n">want</span> <span class="n">to</span> <span class="n">download</span> <span class="n">it</span><span class="o">.</span> <span class="n">Here</span> <span class="n">are</span> <span class="n">some</span> <span class="n">possible</span> <span class="n">reasons</span><span class="p">:</span>\n <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span>\n   <span class="n">It</span> <span class="n">contains</span> <span class="n">very</span> <span class="n">important</span> <span class="n">information</span><span class="o">.</span>\n  <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span>\n   <span class="n">You</span> <span class="n">are</span> <span class="n">the</span>\n   <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.google.com/&quot;</span><span class="o">&gt;</span>\n    <span class="n">Google</span> <span class="n">bot</span>\n   <span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>\n   <span class="p">,</span> <span class="ow">and</span> <span class="n">you</span><span class="s">&#39;ll visit</span>\n   <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span>\n    <span class="n">anything</span>\n   <span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span>\n   <span class="o">.</span>\n  <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span>\n   <span class="n">It</span><span class="s">&#39;s the example we are using in class.</span>\n  <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n <span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span>\n  <span class="n">Results</span>\n <span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span>\n   <span class="n">It</span> <span class="ow">is</span> <span class="n">important</span> <span class="n">to</span> <span class="n">have</span> <span class="n">lists</span><span class="o">.</span>\n  <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n  <span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span>\n   <span class="n">That</span> <span class="n">much</span> <span class="n">should</span> <span class="n">be</span> <span class="n">clear</span><span class="o">.</span>\n  <span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n <span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>\n  <span class="n">Everything</span> <span class="n">we</span> <span class="n">say</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">page</span> <span class="ow">is</span> <span class="n">true</span><span class="o">.</span>\n <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span>\n  <span class="n">Conclusion</span>\n <span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>\n  <span class="n">This</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">interesting</span><span class="o">.</span>\n <span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>\n</pre></div>\n</td></tr></table>\n\n<p>OK now let\'s look at the children of the HTML tag:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37</pre></div></td><td class="code"><div class="codehilite"><pre><span class="nb">len</span><span class="p">(</span><span class="n">soup</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span> <span class="c">#what about the children of the html</span>\n<span class="c">#OK let&#39;s loop through each of the children and print out the type plus HTML</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">:</span>\n<span class="o">...</span>     <span class="k">print</span> <span class="s">&quot;element of type </span><span class="si">%s</span><span class="s"> follows&quot;</span><span class="o">%</span><span class="n">e</span><span class="o">.</span><span class="n">__class__</span>\n<span class="o">...</span>     <span class="n">e</span>\n<span class="o">...</span>\n<span class="n">element</span> <span class="n">of</span> <span class="nb">type</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">BeautifulSoup</span><span class="o">.</span><span class="n">NavigableString</span><span class="s">&#39;&gt; follows</span>\n<span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span>\n<span class="n">element</span> <span class="n">of</span> <span class="nb">type</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">BeautifulSoup</span><span class="o">.</span><span class="n">Tag</span><span class="s">&#39;&gt; follows</span>\n<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Example</span> <span class="n">HTML</span> <span class="nb">file</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>\n<span class="n">element</span> <span class="n">of</span> <span class="nb">type</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">BeautifulSoup</span><span class="o">.</span><span class="n">NavigableString</span><span class="s">&#39;&gt; follows</span>\n<span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span>\n<span class="n">element</span> <span class="n">of</span> <span class="nb">type</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">BeautifulSoup</span><span class="o">.</span><span class="n">Tag</span><span class="s">&#39;&gt; follows</span>\n<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Important</span> <span class="n">things</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="n">Summary</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Here</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">example</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.w3schools.com/html/&quot;</span><span class="o">&gt;</span><span class="n">HTML</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span> <span class="nb">file</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Motivation</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">I</span><span class="s">&#39;m not sure why you&#39;</span><span class="n">d</span> <span class="n">want</span> <span class="n">to</span> <span class="n">download</span> <span class="n">it</span><span class="o">.</span> <span class="n">Here</span> <span class="n">are</span> <span class="n">some</span> <span class="n">possible</span> <span class="n">reasons</span><span class="p">:</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span> <span class="n">contains</span> <span class="n">very</span> <span class="n">important</span> <span class="n">information</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">You</span> <span class="n">are</span> <span class="n">the</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.google.com/&quot;</span><span class="o">&gt;</span><span class="n">Google</span> <span class="n">bot</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="p">,</span> <span class="ow">and</span> <span class="n">you</span><span class="s">&#39;ll visit &lt;em&gt;anything&lt;/em&gt;.&lt;/li&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span><span class="s">&#39;s the example we are using in class.&lt;/li&gt;</span>\n<span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Results</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span> <span class="ow">is</span> <span class="n">important</span> <span class="n">to</span> <span class="n">have</span> <span class="n">lists</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">That</span> <span class="n">much</span> <span class="n">should</span> <span class="n">be</span> <span class="n">clear</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Everything</span> <span class="n">we</span> <span class="n">say</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">page</span> <span class="ow">is</span> <span class="n">true</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Conclusion</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">This</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">interesting</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>\n<span class="n">element</span> <span class="n">of</span> <span class="nb">type</span> <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">BeautifulSoup</span><span class="o">.</span><span class="n">NavigableString</span><span class="s">&#39;&gt; follows</span>\n<span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span>\n</pre></div>\n</td></tr></table>\n\n<p>So note that we have objects of two types: NavigableString and Tag.  The NavigableStrings seem to correspond to some newline characters, while the two Tags are one for the head and one for the body.  You can continue to navigate to the children of interest like so:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13\n14\n15\n16\n17\n18</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">headTag</span><span class="o">=</span><span class="n">soup</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">bodyTag</span><span class="o">=</span><span class="n">soup</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">bodyTag</span><span class="o">.</span><span class="n">contents</span>\n<span class="p">[</span><span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="n">Important</span> <span class="n">things</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="n">Summary</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Here</span> <span class="ow">is</span> <span class="n">an</span> <span class="n">example</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.w3schools.com/html/&quot;</span><span class="o">&gt;</span><span class="n">HTML</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span> <span class="nb">file</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Motivation</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">I</span><span class="s">&#39;m not sure why you&#39;</span><span class="n">d</span> <span class="n">want</span> <span class="n">to</span> <span class="n">download</span> <span class="n">it</span><span class="o">.</span> <span class="n">Here</span> <span class="n">are</span> <span class="n">some</span> <span class="n">possible</span> <span class="n">reasons</span><span class="p">:</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span> <span class="n">contains</span> <span class="n">very</span> <span class="n">important</span> <span class="n">information</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">You</span> <span class="n">are</span> <span class="n">the</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.google.com/&quot;</span><span class="o">&gt;</span><span class="n">Google</span> <span class="n">bot</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="p">,</span> <span class="ow">and</span> <span class="n">you</span><span class="s">&#39;ll visit &lt;em&gt;anything&lt;/em&gt;.&lt;/li&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span><span class="s">&#39;s the example we are using in class.&lt;/li&gt;</span>\n<span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Results</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span> <span class="ow">is</span> <span class="n">important</span> <span class="n">to</span> <span class="n">have</span> <span class="n">lists</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">That</span> <span class="n">much</span> <span class="n">should</span> <span class="n">be</span> <span class="n">clear</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">Everything</span> <span class="n">we</span> <span class="n">say</span> <span class="ow">in</span> <span class="n">this</span> <span class="n">page</span> <span class="ow">is</span> <span class="n">true</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Conclusion</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">This</span> <span class="ow">is</span> <span class="n">very</span> <span class="n">interesting</span><span class="o">.&lt;/</span><span class="n">p</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">]</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">headTag</span><span class="o">.</span><span class="n">contents</span>\n<span class="p">[</span><span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Example</span> <span class="n">HTML</span> <span class="nb">file</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span><span class="p">,</span> <span class="s">u&#39;</span><span class="se">\\n</span><span class="s">&#39;</span><span class="p">]</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">titleTag</span><span class="o">=</span><span class="n">headTag</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">titleTag</span>\n<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Example</span> <span class="n">HTML</span> <span class="nb">file</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">titleTag</span><span class="o">.</span><span class="n">text</span>\n<span class="s">u&#39;Example HTML file&#39;</span>\n</pre></div>\n</td></tr></table>\n\n<p>You can also navigate back up to the parent:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2\n3\n4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">titleTag</span><span class="o">.</span><span class="n">parent</span>\n<span class="o">&lt;</span><span class="n">head</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">title</span><span class="o">&gt;</span><span class="n">Example</span> <span class="n">HTML</span> <span class="nb">file</span><span class="o">&lt;/</span><span class="n">title</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">head</span><span class="o">&gt;</span>\n</pre></div>\n</td></tr></table>\n\n<p>Finally you can access adjacent siblings:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2\n3\n4</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">bodyTag</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">nextSibling</span><span class="o">==</span><span class="n">bodyTag</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>\n<span class="bp">True</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">bodyTag</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">previousSibling</span><span class="o">==</span><span class="n">bodyTag</span><span class="o">.</span><span class="n">contents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>\n<span class="bp">True</span>\n</pre></div>\n</td></tr></table>\n\n<h3>Beautiful Soup Strategy 2: Finding the Right Tags</h3>\n<p>While navigating the parse directly can be useful, the true power of BeautifulSoup lies in its ability to search for particular tags.  Suppose we wanted to get our hands on all <code>&lt;h2&gt;</code> tags.  Well we can use the <code>findAll</code> method for that.</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&quot;h2&quot;</span><span class="p">)</span>\n<span class="p">[</span><span class="o">&lt;</span><span class="n">h2</span><span class="o">&gt;</span><span class="n">Summary</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Motivation</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Results</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Conclusion</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">]</span>\n</pre></div>\n</td></tr></table>\n\n<p>Let\'s say we just wanted the section headings themselves, and not the tag names.  To do that, let\'s use a list comprehension:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&quot;h2&quot;</span><span class="p">)]</span>\n<span class="p">[</span><span class="s">u&#39;Summary&#39;</span><span class="p">,</span> <span class="s">u&#39;Motivation&#39;</span><span class="p">,</span> <span class="s">u&#39;Results&#39;</span><span class="p">,</span> <span class="s">u&#39;Conclusion&#39;</span><span class="p">]</span>\n</pre></div>\n</td></tr></table>\n\n<p>Recall that HTML tags can have attribute-value pairs. These can be accessed like a dictionary for tag objects:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2\n3\n4\n5\n6\n7\n8\n9</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">anchors</span><span class="o">=</span><span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">)</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">anchors</span><span class="p">)</span>\n<span class="mi">2</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">anchors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>          <span class="c">#here&#39;s the first link</span>\n<span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.w3schools.com/html/&quot;</span><span class="o">&gt;</span><span class="n">HTML</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">anchors</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s">&quot;href&quot;</span><span class="p">]</span>  <span class="c">#here&#39;s how you get the URL out of an anchor tag</span>\n<span class="s">u&#39;http://www.w3schools.com/html/&#39;</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">anchors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">text</span>     <span class="c">#and here&#39;s the Inner HTML</span>\n<span class="s">u&#39;HTML&#39;</span>\n</pre></div>\n</td></tr></table>\n\n<p>The <code>findAll()</code> method is very powerful.  You can customize <code>findAll</code> to only return tags with certain attribute values, such as:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1\n2\n3</pre></div></td><td class="code"><div class="codehilite"><pre><span class="n">sectionheaders</span><span class="o">=</span><span class="n">soup</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&quot;h2&quot;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;class&quot;</span><span class="p">:</span><span class="s">&quot;section&quot;</span><span class="p">})</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">sectionheaders</span>\n<span class="p">[</span><span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Motivation</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Results</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">h2</span> <span class="n">class</span><span class="o">=</span><span class="s">&quot;section&quot;</span><span class="o">&gt;</span><span class="n">Conclusion</span><span class="o">&lt;/</span><span class="n">h2</span><span class="o">&gt;</span><span class="p">]</span>\n</pre></div>\n</td></tr></table>\n\n<p>Finally, a common strategy when parsing HTML files is to first find the part of the tree of interest, then extract the necessary tags.  For example, suppose we are interested in getting the 3 reasons listed in the Motivation section of <code>htmldemo.html</code>, but not the list in the Results section.  You can first find the Motivation header tag, then get just the list elements from there:</p>\n<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1\n 2\n 3\n 4\n 5\n 6\n 7\n 8\n 9\n10\n11\n12\n13</pre></div></td><td class="code"><div class="codehilite"><pre><span class="o">&gt;&gt;&gt;</span> <span class="n">mtag</span><span class="o">=</span><span class="n">soup</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;div&quot;</span><span class="p">,</span><span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s">&quot;id&quot;</span><span class="p">:</span><span class="s">&quot;motives&quot;</span><span class="p">})</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">mtag</span>\n<span class="o">&lt;</span><span class="n">div</span> <span class="nb">id</span><span class="o">=</span><span class="s">&quot;motives&quot;</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">I</span><span class="s">&#39;m not sure why you&#39;</span><span class="n">d</span> <span class="n">want</span> <span class="n">to</span> <span class="n">download</span> <span class="n">it</span><span class="o">.</span> <span class="n">Here</span> <span class="n">are</span> <span class="n">some</span> <span class="n">possible</span> <span class="n">reasons</span><span class="p">:</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span> <span class="n">contains</span> <span class="n">very</span> <span class="n">important</span> <span class="n">information</span><span class="o">.&lt;/</span><span class="n">li</span><span class="o">&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">You</span> <span class="n">are</span> <span class="n">the</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">href</span><span class="o">=</span><span class="s">&quot;http://www.google.com/&quot;</span><span class="o">&gt;</span><span class="n">Google</span> <span class="n">bot</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;</span><span class="p">,</span> <span class="ow">and</span> <span class="n">you</span><span class="s">&#39;ll visit &lt;em&gt;anything&lt;/em&gt;.&lt;/li&gt;</span>\n<span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="n">It</span><span class="s">&#39;s the example we are using in class.&lt;/li&gt;</span>\n<span class="o">&lt;/</span><span class="n">ol</span><span class="o">&gt;</span>\n<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">lisText</span><span class="o">=</span><span class="p">[</span><span class="n">t</span><span class="o">.</span><span class="n">text</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">mtag</span><span class="o">.</span><span class="n">findAll</span><span class="p">(</span><span class="s">&quot;li&quot;</span><span class="p">)]</span>\n<span class="o">&gt;&gt;&gt;</span> <span class="n">lisText</span>\n<span class="p">[</span><span class="s">u&#39;It contains very important information.&#39;</span><span class="p">,</span> <span class="s">u&quot;You are theGoogle bot, and you&#39;ll visitanything.&quot;</span><span class="p">,</span> <span class="s">u&quot;It&#39;s the example we are using in class.&quot;</span><span class="p">]</span>\n</pre></div>\n</td></tr></table>\n\n<p>There\'s lots more to the <code>findAll</code> method than covered here (particularly the ability to search using regular expressions).  For more information, see the <a href="http://www.crummy.com/software/BeautifulSoup/documentation.html#The%20basic%20find%20method:%20findAll%28name,%20attrs,%20recursive,%20text,%20limit,%20**kwargs%29">Beautiful Soup documentation</a>.</p></div> <!-- end the content div-->\n<div id="footer">\n<hr>\n<p>&copy; 2012 Tyler Moore\n<p>Last modified: Tue Feb  7 17:58:57 2012\n</div>\n</div> <!-- end the main div -->\n</body>'